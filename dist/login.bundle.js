document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("loginForm").addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("nik").value,o=document.getElementById("password").value;try{const e=await fetch("https://3937-103-186-213-7.ngrok-free.app/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nik:t,password:o})}),a=await e.json();e.ok?(alert("Login berhasil!"),localStorage.setItem("token",a.token),localStorage.setItem("role",a.role),"petugas"===a.role?window.location.href="dashboard.html":"ibu"===a.role&&(window.location.href="DashboardUser.html")):alert(a.message||"Login gagal")}catch(e){console.error("Login error:",e),alert("Terjadi kesalahan pada server.")}}))}));